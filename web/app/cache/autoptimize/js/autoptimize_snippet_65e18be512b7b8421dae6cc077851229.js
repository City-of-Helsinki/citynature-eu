(function(){function Main(){var init_functions=[];this.init=function(){for(var i=0,len=init_functions.length;i<len;i++){var fnc=init_functions[i];fnc();}};this.add=function(fnc){init_functions.push(fnc);};this.getCurrentMap=function(){return this.maps[this.maps.length-1];};this.getCurrentMarkerGroup=function(){var mapid=this.maps.length;if(!this.markergroups[mapid]){this.markergroups[mapid]=this.newMarkerGroup(this.maps[mapid-1]);}
return this.markergroups[mapid];};this.newMarkerGroup=function(map){var mg=new L.FeatureGroup().addTo(map);mg.timeout=null;if(map.fit_markers){mg.on('layeradd',function(d){window.clearTimeout(this.timeout);this.timeout=window.setTimeout(function(){map.fitBounds(mg.getBounds());},100);},mg);}
return mg;};this.maps=[];this.images=[];this.markergroups={};this.markers=[];this.lines=[];}
Main.prototype.unescape=function(str){var div=document.createElement('div');div.innerHTML=str;return div.innerText;};window.WPLeafletMapPlugin=new Main();if(window.addEventListener){window.addEventListener('load',window.WPLeafletMapPlugin.init,false);}else if(window.attachEvent){window.attachEvent('onload',function(){window.WPLeafletMapPlugin.init();});}})();